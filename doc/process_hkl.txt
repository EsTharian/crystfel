process_hkl - data scaling and merging program
----------------------------------------------

This program takes as input the data stream from "indexamajig".  It merges the
many individual intensities together to form a single list of reflection
intensities which are useful for crystallography.

Typical usage is of the form:

$ process_hkl -i mypatterns.stream -o mydata.hkl -y mypointgroup


How to choose the point group
-----------------------------

One of the main features of serial crystallography is that the orientations of
individual crystals are random.  That means that the orientation of each
crystal must be determined independently, with no information about its
relationship to the orientation of crystals in other patterns (as would be the
case for a rotation series of patterns).

Some Laue classes are merohedral.  This means that the orientation will have an
ambiguity, but this time more serious.  The two (or more) possible
orientations could be called "twins", but the mechanism of their formation is
somewhat different to the conventional use of the term.  In these cases, you
will need to merge according to the point group corresponding holohedral Laue
class.

You can also tell process_hkl the "apparent" symmetry, which is the symmetry as
far as whatever produced the stream was concerned.  In the case of most indexing
algorithms, this will be the corresponding holohedral point group (not the
Laue class nor the holohedral Laue class).  If you use the "-a" option to give
this information, process_hkl will try to resolve the remaining orientational
ambiguities to get from the apparent symmetry to the true symmetry (given with
"-y").  Currently, it won't do a very good job of it.

Commit number 5cdcaad6277c on the 13th of October 2010 altered indexamajig such
that it always finds a right-handed unit cell.  That means that no ambiguity due
to inversion exists in streams produced by versions later than that.  For
streams produced by copies of indexamajig older than that, you DO need to use
the corresponding holohedral Laue class (not point group) as the apparent
symmetry (with -a).  However, since the ambiguity resolution used by process_hkl
doesn't really work, this detail is somewhat academic.

The document twin-calculator.pdf contains more detailed information about this
issue, as well as tables which contain all the required information.
